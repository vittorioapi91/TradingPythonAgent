{# Override Airflow's DAGs template to add environment banner #}
{% extends "airflow/dags.html" %}

{% block head_css %}
{{ super() }}
<style>
    .env-banner {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 15px 20px;
        margin-bottom: 20px;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .env-banner-content {
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
    }
    .env-banner-info {
        display: flex;
        align-items: center;
        gap: 20px;
        flex-wrap: wrap;
    }
    .env-badge {
        background-color: {% if airflow_env == 'DEV' %}#28a745{% elif airflow_env == 'STAGING' %}#ffc107{% else %}#dc3545{% endif %};
        color: {% if airflow_env == 'STAGING' %}black{% else %}white{% endif %};
        padding: 4px 12px;
        border-radius: 4px;
        font-weight: bold;
        margin-left: 8px;
    }
    .env-banner-link {
        color: white;
        text-decoration: underline;
        font-size: 13px;
    }
    .env-banner-link:hover {
        color: #f0f0f0;
    }
</style>
{% endblock %}

{% block content %}
<div class="env-banner">
    <div class="env-banner-content">
        <div class="env-banner-info">
            <div>
                <strong style="font-size: 14px; opacity: 0.9;">Environment:</strong>
                <span class="env-badge">{{ airflow_env }}</span>
            </div>
            <div>
                <strong style="font-size: 14px; opacity: 0.9;">Wheel:</strong>
                <span style="font-family: monospace; margin-left: 8px;">{{ airflow_wheel_version }}</span>
            </div>
            <div>
                <strong style="font-size: 14px; opacity: 0.9;">Database:</strong>
                <span style="font-family: monospace; margin-left: 8px;">{{ airflow_db_user }}@{{ airflow_db_instance }}</span>
            </div>
        </div>
        <div>
            <a href="/environment-info/" class="env-banner-link">View Details â†’</a>
        </div>
    </div>
</div>
{{ super() }}
{% endblock %}
